// Generated by CoffeeScript 1.9.1
(function() {
  'use strict';
  var _, findDuplicates, prettyPrint;

  _ = require('lodash');

  prettyPrint = function(data) {
    return console.log(JSON.stringify(_.sample(data, 10), null, 2));
  };

  findDuplicates = function(skus) {
    return _.chain(skus).groupBy(function(sku) {
      return sku;
    }).tap(function(skus) {
      console.log("----------------------------------------");
      console.log("Grouped:");
      return prettyPrint(skus);
    }).pairs().tap(function(skus) {
      console.log("----------------------------------------");
      console.log("Paired:");
      return prettyPrint(skus);
    }).filter(function(item) {
      return item[1].length > 1;
    }).tap(function(skus) {
      console.log("----------------------------------------");
      console.log("Filtered:");
      return prettyPrint(skus);
    }).map(function(item) {
      return item[0];
    }).tap(function(skus) {
      console.log("----------------------------------------");
      console.log("Mapped:");
      return prettyPrint(skus);
    }).sortBy(function(sku) {
      return sku;
    }).tap(function(skus) {
      console.log("----------------------------------------");
      console.log("Sorted:");
      return prettyPrint(skus);
    }).value();
  };

  module.exports = findDuplicates;

}).call(this);
